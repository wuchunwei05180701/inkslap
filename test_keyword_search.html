<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>關鍵字搜尋功能測試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .feature-section {
            background-color: #f6ffed;
            border: 1px solid #b7eb8f;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .feature-section h3 {
            margin: 0 0 10px 0;
            color: #52c41a;
        }
        .step-section {
            background-color: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .step-section h3 {
            margin: 0 0 10px 0;
            color: #1890ff;
        }
        .test-keywords {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        .keyword-tag {
            background-color: #fff2e8;
            border: 1px solid #ffbb96;
            border-radius: 4px;
            padding: 6px 12px;
            text-align: center;
            font-size: 14px;
            color: #fa8c16;
        }
        .flow-diagram {
            background-color: #fafafa;
            border: 1px solid #d9d9d9;
            border-radius: 6px;
            padding: 16px;
            margin: 10px 0;
        }
        .flow-step {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            border-left: 4px solid #1890ff;
        }
        .flow-step .step-number {
            background-color: #1890ff;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 關鍵字搜尋功能測試</h1>
        
        <div class="feature-section">
            <h3>✨ 新增功能：智能關鍵字搜尋</h3>
            <p>現在當您點擊「其他關鍵字搜尋」按鈕後，系統會：</p>
            <ul>
                <li><strong>顯示搜尋提示</strong>：「想找特定商品嗎？輸入關鍵字試試看吧 (例如：辦公小物、送男友、收納)」</li>
                <li><strong>智能檢測</strong>：系統會檢測您是否在回應搜尋提示</li>
                <li><strong>前端模糊搜尋</strong>：直接使用前端的模糊搜尋功能，不需要等待後端 API</li>
                <li><strong>即時結果</strong>：快速顯示符合關鍵字的商品推薦</li>
            </ul>
        </div>

        <div class="step-section">
            <h3>📋 測試流程</h3>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>在聊天組件中輸入任意內容，讓系統顯示「其他關鍵字搜尋」按鈕</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>點擊「其他關鍵字搜尋」按鈕</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>系統顯示搜尋提示訊息</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>在輸入欄位中輸入下方任一測試關鍵字</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div>按 Enter 或點擊發送按鈕</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">6</div>
                    <div>系統立即顯示搜尋結果（不會顯示「正在查詢中」）</div>
                </div>
            </div>
        </div>

        <div class="step-section">
            <h3>🎯 建議測試關鍵字</h3>
            <p>以下關鍵字已經過同義詞擴展，應該能找到對應商品：</p>
            
            <h4>👒 帽子類</h4>
            <div class="test-keywords">
                <div class="keyword-tag">帽子</div>
                <div class="keyword-tag">帽</div>
                <div class="keyword-tag">棒球帽</div>
                <div class="keyword-tag">毛帽</div>
            </div>

            <h4>📦 包袋類</h4>
            <div class="test-keywords">
                <div class="keyword-tag">包</div>
                <div class="keyword-tag">包包</div>
                <div class="keyword-tag">收納</div>
                <div class="keyword-tag">托特包</div>
                <div class="keyword-tag">零錢包</div>
            </div>

            <h4>✏️ 文具類</h4>
            <div class="test-keywords">
                <div class="keyword-tag">筆</div>
                <div class="keyword-tag">圓珠筆</div>
                <div class="keyword-tag">文具</div>
                <div class="keyword-tag">記事本</div>
            </div>

            <h4>🥤 杯具類</h4>
            <div class="test-keywords">
                <div class="keyword-tag">杯</div>
                <div class="keyword-tag">杯子</div>
                <div class="keyword-tag">不銹鋼杯</div>
                <div class="keyword-tag">環保杯</div>
            </div>
        </div>

        <div class="feature-section">
            <h3>🔧 技術實現</h3>
            <ul>
                <li><strong>智能檢測</strong>：檢查上一條訊息是否為搜尋提示 (isSearchPrompt)</li>
                <li><strong>前端搜尋</strong>：使用 searchProducts() 函數進行模糊搜尋</li>
                <li><strong>同義詞擴展</strong>：支援 expandKeywords() 進行關鍵字擴展</li>
                <li><strong>即時回應</strong>：跳過後端 API 調用，直接顯示結果</li>
                <li><strong>商品點擊</strong>：支援點擊商品卡片查看詳細資訊</li>
            </ul>
        </div>

        <div class="step-section">
            <h3>✅ 預期結果</h3>
            <ul>
                <li>點擊「其他關鍵字搜尋」後會顯示搜尋提示</li>
                <li>輸入關鍵字後立即顯示搜尋結果（無載入動畫）</li>
                <li>顯示符合關鍵字的商品卡片（左圖右文格式）</li>
                <li>支援「查看更多」按鈕載入更多商品</li>
                <li>點擊商品卡片會顯示興趣確認和詳細資訊</li>
                <li>如果無結果會顯示建議關鍵字和操作按鈕</li>
            </ul>
        </div>

        <!-- 聊天組件測試區域 -->
        <div style="margin-top: 30px; border-top: 2px solid #f0f0f0; padding-top: 20px;">
            <h2>💬 聊天組件測試區域</h2>
            <p>請在下方測試關鍵字搜尋功能：</p>
            <chat-window-web-component 
                api-url="/api/chat"
                history-path="/history.json">
            </chat-window-web-component>
        </div>
    </div>

    <!-- 載入聊天組件 -->
    <script src="chat_windows/src/ChatWindowWebComponent.js"></script>
</body>
</html>
